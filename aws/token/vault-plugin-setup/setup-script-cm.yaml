apiVersion: v1
kind: ConfigMap
metadata:
  name: vault-setup-script
data:
  setup.sh: |
    #!/bin/bash

    # activate plugin
      curl --location --request PUT 'http://token-vault/v1/sys/plugins/catalog/secret/vault-ethereum' \
    --header 'X-Vault-Token: ${VAULT_TOKEN}' \
    --header 'Content-Type: application/json' \
      --data-raw '{
    "sha256": "76dc18d1811e2086e784414ffdef700854959e85fdfd61f089b138f1e0364aa2",
    "command": "vault-ethereum --tls-skip-verify=true"
    }'
    
    # mount plugin
    curl --location --request POST 'http://token-vault/v1/sys/mounts/ethereum' \
    --header 'X-Vault-Token: ${VAULT_TOKEN}' \
    --header 'Content-Type: application/json' \
      --data-raw '{
      "type":"vault-ethereum"
    }'